<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="top.warmheart.workerunion.server.dao.RoleMapper">
	<resultMap id="BaseResultMap" type="top.warmheart.workerunion.server.model.Role">
		<!-- WARNING - @mbg.generated This element is automatically generated by MyBatis Generator, do not modify. -->
		<id column="id" jdbcType="BIGINT" property="id" />
		<result column="company_id" jdbcType="BIGINT" property="companyId" />
		<result column="name" jdbcType="VARCHAR" property="name" />
		<result column="cst_create" jdbcType="TIMESTAMP" property="cstCreate" />
		<result column="cst_modified" jdbcType="TIMESTAMP" property="cstModified" />
		<result column="is_del" jdbcType="BIT" property="del" />
	</resultMap>
	<delete id="deleteByPrimaryKey" parameterType="java.math.BigInteger">
		<!-- WARNING - @mbg.generated This element is automatically generated by MyBatis Generator, do not modify. -->
		delete from role
		where id = #{id,jdbcType=BIGINT}
	</delete>
	<insert id="insert" parameterType="top.warmheart.workerunion.server.model.Role">
		<!-- WARNING - @mbg.generated This element is automatically generated by MyBatis Generator, do not modify. -->
		<selectKey keyProperty="id" order="AFTER" resultType="java.math.BigInteger">
			SELECT LAST_INSERT_ID()
		</selectKey>
		insert into role (company_id, name, cst_create,
		cst_modified, is_del)
		values (#{companyId,jdbcType=BIGINT}, #{name,jdbcType=VARCHAR}, now(),
		now(), false)
	</insert>
	<update id="updateByPrimaryKey" parameterType="top.warmheart.workerunion.server.model.Role">
		<!-- WARNING - @mbg.generated This element is automatically generated by MyBatis Generator, do not modify. -->
		update role
		set company_id = #{companyId,jdbcType=BIGINT},
		name = #{name,jdbcType=VARCHAR},
		cst_modified = now()
		where id = #{id,jdbcType=BIGINT}
	</update>
	<select id="selectByPrimaryKey" parameterType="java.math.BigInteger" resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by MyBatis Generator, do not modify. -->
		select id, company_id, name, cst_create, cst_modified, is_del
		from role
		where id = #{id,jdbcType=BIGINT}
	</select>
	<select id="selectAll" resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by MyBatis Generator, do not modify. -->
		select id, company_id, name, cst_create, cst_modified, is_del
		from role
	</select>

	<select id="selectListByStaff" resultMap="BaseResultMap">
		select r.id, r.company_id, r.name, r.cst_create, r.cst_modified,
		r.is_del from staff_has_role sr, role r where sr.staff_id=#{staffId,jdbcType=BIGINT} and sr.role_id=r.id and
		r.company_id=#{companyId,jdbcType=BIGINT} and r.is_del=false
	</select>
	<select id="selectListByCompanyId" resultMap="BaseResultMap">
		select id, company_id, name, cst_create, cst_modified, is_del
		from role where company_id=#{companyId,jdbcType=BIGINT} and is_del = false
	</select>
</mapper>